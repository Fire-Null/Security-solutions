#### Lfi  یا Local File Inclusion یک نوع دسترسی محلی به مهاجم برای مشاهده‌ی فایل های وب‌سایت هدف را می‌دهد. باگ Lfi بیشتر در اشتباهات برنامه‌نویس در استفاده از توابعی مثل Include ,require() و غیره رخ می‌دهد  و می‌تواند منجر به خواندن فایل‌های مهم همچون config شود.

##### توضیح و مثال برای درک بهتر 

* ورودی سایت زیر را در نظر بگیرید که در ان 1 وارد شده و باگ LFI در وجود دارد پس ما می‌توانیم از طریق این ورودی فایل‌های مورد نظر خود را بخوانیم

```url
http://site/page.php?id=1
```
* یکی از مهم‌ترین فایل های سرور /etc/passwd که اطلاعات کاربران در آن موجود است و با خواندن آن می‌توانیم به اطلاعات مهم سرور دسترسی پیدا کنیم پس فقط کافیست در ورودی آسیب‌پذیر آدرس مسیر مورد نظر را وارد کنیم
```url
http://site/page.php?id=/etc/passwd
```
* اما اگر صفحه آسیب پذیر در پوشه‌های تو در تو بیشتری باشد باید به عقب برگردیم تا به فایل‌سرور برسیم برای این بازگشت باید از /.. استفاده کنیم

```url
http://site/page.php?id=../etc/passwd
```
* در صورت به نتیجه نرسیدن می‌توانید باز هم به عقب بروید و این کار را تکرار کنید تا به فایل اصلی دسترسی پیدا کنید و بتوانید از باگ LFI  استفاده کنید

#### پیشگیری از  LFI 

* برای امن‌سازی با LFI ، باید در هنگام کدنویسی ورودی‌ها کنترل شوند و کاراکترهای خاص و مربوط به این آسیب‌پذیری فیلتر شوند به طوریکه با وارد کردن آن‌ها در ورودی حذف شوند.این کاراکتر ها عبارت است از : / و . یا می‌توانید از یک فایروال قدرتمند برای فیلتر این کاراکترها استفاده کنید اما در صورت بایپس فایروال آسیب‌پذیری همچنان باقی می‌ماند. 

* یک راه برای جلوگیری از آسیب‌پذیری‌های LFI این است که به همه فایل‌هایی که مجاز به INCLUDE آن هستند، یک شناسه منحصربه‌فرد اختصاص داده و سپس با این شناسه به آنها ارجاع دهید. این شناسه به جای نام فایل در URL نشان داده می‌شود و درخواست‌هایی که از شناسه صحیح استفاده نمی‌کنند به سادگی فایل را INCLUDE نمی‌کنند.
